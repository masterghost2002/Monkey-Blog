"use strict";(self.webpackChunkchakraui=self.webpackChunkchakraui||[]).push([[936],{7936:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var s=a(9439),n=a(7313),r=a(4942),i=a(1413),l={inputs:{name:"",email:"",password:"",confirmpassword:""},validationMessage:{otpInvalid:!1,emailInvalid:!1,passwordInvalid:!1},authType:"Login",showOTP:!1,loader:!1},o=function(e,t){switch(t.type){case"SHOW_LOADER":return(0,i.Z)((0,i.Z)({},e),{},{loader:!0});case"HIDE_LOADER":return(0,i.Z)((0,i.Z)({},e),{},{loader:!1});case"SUCCESS_SIGNUP_OTP":return(0,i.Z)((0,i.Z)({},e),{},{showOTP:!0});case"HIDE_SHOW_OTP":return(0,i.Z)((0,i.Z)({},e),{},{showOTP:!1});case"FAILED_AUTH_EMAIL":return(0,i.Z)((0,i.Z)({},e),{},{validationMessage:{emailInvalid:!0}});case"FAILED_AUTH_PASSWORD":return(0,i.Z)((0,i.Z)({},e),{},{validationMessage:{passwordInvalid:!0}});case"FAILED_AUTH_OTP":return(0,i.Z)((0,i.Z)({},e),{},{validationMessage:{otpInvalid:!0}});case"RESET_VALIDATION":return(0,i.Z)((0,i.Z)({},e),{},{validationMessage:{otpInvalid:!1,emailInvalid:!1,passwordInvalid:!1}});case"AUTH_TYPE":return(0,i.Z)((0,i.Z)({},e),{},{authType:t.payload});case"FORM_INPUTS":return(0,i.Z)((0,i.Z)({},e),{},{inputs:(0,i.Z)((0,i.Z)({},e.inputs),{},(0,r.Z)({},t.payload.target.name,t.payload.target.value))});default:return{state:e}}},d=a(6045),u=a(5554),c=a(8467),p=a(4165),h=a(5861),g=a(6074),x=a(3964),f=a(9748),v=a(2767),m=a(4148),S=a(7758),b=a(9507),y=a(6417);function I(e){var t=function(){e.dispatchState({type:"HIDE_SHOW_OTP"}),e.dispatchState({type:"AUTH_TYPE",payload:"Login"})},a=(0,n.useState)(0),r=(0,s.Z)(a,2),i=r[0],l=r[1],o=(0,d.$)().addToast,u=e.state.inputs.email,c=function(){var a=(0,h.Z)((0,p.Z)().mark((function a(s){var n,r;return(0,p.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.dispatchState({type:"SHOW_LOADER"}),n={email:u,OTP:s},a.t0=e.state.authType,a.next="Sign-Up"===a.t0?5:"Reset Password"===a.t0?9:13;break;case 5:return a.next=7,(0,b.uv)(n);case 7:case 11:return r=a.sent,a.abrupt("break",14);case 9:return a.next=11,(0,b.ZL)(n);case 13:return a.abrupt("return");case 14:if(e.dispatchState({type:"HIDE_LOADER"}),200!==r.status){a.next=18;break}return t(),a.abrupt("return");case 18:if(200===r.status){a.next=22;break}return o({title:"OTP Error!",message:"Invalid OTP",status:"warning"}),e.dispatchState({type:"FAILED_AUTH_OTP"}),a.abrupt("return");case 22:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return(0,y.jsxs)(x.gC,{children:[(0,y.jsx)(x.X6,{children:"OTP"}),(0,y.jsx)(x.xv,{align:"center",children:"Enter OTP sent to your mail to verify and continue."}),(0,y.jsx)(x.Ug,{children:(0,y.jsxs)(v.ET,{onChange:function(t){!0===e.state.validationMessage.otpInvalid&&e.dispatchState({type:"RESET_VALIDATION"}),l(t)},isInvalid:!0===e.state.validationMessage.otpInvalid,children:[(0,y.jsx)(v.xj,{}),(0,y.jsx)(v.xj,{}),(0,y.jsx)(v.xj,{}),(0,y.jsx)(v.xj,{})]})}),(0,y.jsxs)(x.gC,{children:[(0,y.jsxs)(x.Ug,{children:[(0,y.jsx)(f.zx,{"aria-label":"resend-otp",rightIcon:(0,y.jsx)(S.ny,{}),width:"100%",onClick:e.handleResend,children:"Resend"}),(0,y.jsx)(f.zx,{"aria-label":"verify",colorScheme:"green",rightIcon:(0,y.jsx)(S.nQ,{}),onClick:function(e){e.preventDefault();var t=String(i);c(t)},width:"100%",children:"Verify"})]}),(0,y.jsx)(f.zx,{"aria-label":"cancel_otp",colorScheme:"red",rightIcon:(0,y.jsx)(S.Db,{}),onClick:t,width:"100%",children:"Cancel"})]}),e.state.loader&&(0,y.jsx)(m.D8,{isIndeterminate:!0,color:"blue.300"})]})}var T=a(4961),w=a(6995),j=a(720),P=a(3068);function _(e){var t=(0,n.useState)(!1),a=(0,s.Z)(t,2),r=a[0],i=a[1];return(0,y.jsxs)(j.NI,{isInvalid:e.isInvalid,children:[(0,y.jsx)(j.lX,{fontWeight:"bold",children:e.label}),(0,y.jsxs)(P.BZ,{mb:4,children:[(0,y.jsx)(P.II,{size:"lg",type:r?"text":"password",variant:e.variant,name:e.name,onChange:e.onChange,placeholder:e.placeholder}),(0,y.jsx)(P.xH,{width:"4.5rem",m:1,children:e.viewButton&&(0,y.jsx)(f.zx,{h:"100%",size:"lg",variant:"ghost",onClick:function(){return i((function(e){return!e}))},children:r?(0,y.jsx)(S.tp,{}):(0,y.jsx)(S.ON,{})})})]})]})}function A(e){var t=(0,g.If)().colorMode,a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,s=(0,d.$)().addToast,n=function(t){t.preventDefault(),e.dispatchState({type:"RESET_VALIDATION"}),e.dispatchState({type:"FORM_INPUTS",payload:t})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(x.Ug,{children:[(0,y.jsx)(x.xv,{display:"flex",fontSize:"4xl",fontWeight:"bold",color:"blue.500",children:"MONKEY"}),(0,y.jsx)(x.xv,{fontSize:"4xl",fontWeight:"bold",display:"flex",color:"light"===t?"black":"white",children:"APP"})]}),(0,y.jsx)(x.X6,{alignSelf:"flex-start",children:e.state.authType}),(0,y.jsxs)(x.kC,{w:"100%",justifyContent:"flex-start",children:["Login"===e.state.authType&&(0,y.jsxs)(x.xv,{fontWeight:"bold",color:"gray.500",children:["Don't have an account? ",(0,y.jsx)(x.rU,{onClick:function(){return e.dispatchState({type:"AUTH_TYPE",payload:"Sign-Up"})},color:"blue.400",children:"Sign-Up"})]}),"Sign-Up"===e.state.authType&&(0,y.jsxs)(x.xv,{fontWeight:"bold",color:"gray.500",children:["Already have an account? ",(0,y.jsx)(x.rU,{onClick:function(){return e.dispatchState({type:"AUTH_TYPE",payload:"Login"})},color:"blue.400",children:"Login"})]})]}),(0,y.jsxs)(T.Z,{handleSubmit:function(t){return t.preventDefault(),e.state.inputs.email.match(a)?"Sign-Up"!==e.state.authType||0!==e.state.inputs.name.trim().length?0===e.state.inputs.password.trim().length||e.state.inputs.password.length<8?(s({title:"Invalid Input",message:"Password Should be 8 character long",status:"warning"}),void e.dispatchState({type:"FAILED_AUTH_PASSWORD"})):"Login"!==e.state.authType&&e.state.inputs.password!==e.state.inputs.confirmpassword?(s({title:"Invalid Input",message:"Password and confrim must be same",status:"warning"}),void e.dispatchState({type:"FAILED_AUTH_PASSWORD"})):void e.sendRequest():void s({title:"Invalid Input",message:"Opps you don't have any name?",status:"warning"}):(s({title:"Invalid Input",message:"Not a valid email",status:"warning"}),void e.dispatchState({type:"FAILED_AUTH_EMAIL"}))},children:["Sign-Up"===e.state.authType&&(0,y.jsx)(w.Z,{label:"Full Name",variant:"filled",name:"name",placeholder:"Joe Stark",size:"lg",onChange:n}),(0,y.jsx)(w.Z,{isInvalid:!0===e.state.validationMessage.emailInvalid,label:"Email",variant:"filled",name:"email",placeholder:"joe@example.com",size:"lg",onChange:n}),(0,y.jsx)(_,{isInvalid:!0===e.state.validationMessage.passwordInvalid,variant:"filled",name:"password",label:"Reset Password"===e.state.authType?"New Password":"Password",placeholder:"Reset Password"===e.state.authType?"New Password":"Password",size:"lg",onChange:n}),("Sign-Up"===e.state.authType||"Reset Password"===e.state.authType)&&(0,y.jsx)(_,{isInvalid:!0===e.state.validationMessage.passwordInvalid,label:"Confrim Password",variant:"filled",placeholder:"Confirm Password",viewButton:!1,name:"confirmpassword",size:"lg",onChange:n}),"Sign-Up"!==e.state.authType&&(0,y.jsxs)(x.kC,{w:"100%",justifyContent:"flex-end",children:["Login"===e.state.authType&&(0,y.jsx)(x.rU,{fontWeight:"bold",color:"blue.400",mb:4,onClick:function(){return e.dispatchState({type:"AUTH_TYPE",payload:"Reset Password"})},children:"Forgot Password?"}),"Reset Password"===e.state.authType&&(0,y.jsx)(x.rU,{fontWeight:"bold",color:"blue.400",mb:4,onClick:function(){return e.dispatchState({type:"AUTH_TYPE",payload:"Login"})},children:"Remember Password?"})]}),(0,y.jsxs)(x.gC,{children:[!e.state.loader&&(0,y.jsx)(f.zx,{type:"submit",size:"lg",bg:"blue.400",_hover:{bg:"blue.300"},width:"100%","aria-label":"submit_btn",children:e.state.authType}),e.state.loader&&(0,y.jsx)(m.D8,{isIndeterminate:!0,color:"blue.300"})]})]})]})}_.defaultProps={placeholder:"Password",variant:"filled",label:"Password",id:"floatingPassword",viewButton:!0,disabled:!1,isInvalid:!0};var Z=a(5298),E=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t,a,s,n,r,i,l){var o,d,u;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Cn)(t);case 2:if(200!==(o=e.sent).status){e.next=15;break}return e.next=6,o.data;case 6:return d=e.sent,e.next=9,d.user;case 9:return u=e.sent,i!==u.themeSide&&l(),n(r.login([u._id,u.name])),localStorage.setItem("auth_access_token",d.accessToken),s({title:"Hello!",message:u.name,status:"success"}),e.abrupt("return",!0);case 15:return s({title:"Login!",message:o.data.message,status:"error"}),404===o.status?a({type:"FAILED_AUTH_EMAIL"}):400===o.status&&a({type:"FAILED_AUTH_PASSWORD"}),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e)})));return function(t,a,s,n,r,i,l){return e.apply(this,arguments)}}(),U=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t,a,s){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.yc)(t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return a({type:"SUCCESS_SIGNUP_OTP"}),s({title:"OTP!",message:"Sent Success",status:"success"}),e.abrupt("return",!0);case 7:return s({title:"Sign Up!",message:n.data.message,status:"error"}),404===n.status&&"Unable to send otp"===n.data.message?a({type:"SIGNUP_OTP"}):404===n.status?a({type:"FAILED_AUTH_EMAIL"}):400===n.status&&a({type:"FAILED_AUTH_PASSWORD"}),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}(),O=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(t,a,s){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.G2)(t);case 2:if(200!==(n=e.sent).status){e.next=7;break}return a({type:"SUCCESS_SIGNUP_OTP"}),s({title:"OTP!",message:"Sent Success",status:"success"}),e.abrupt("return",!0);case 7:return s({title:"Password Reset",message:n.data.message,status:"error"}),404===n.status&&"Unable to send otp"!==n.data.message?a({type:"FAILED_AUTH_EMAIL"}):400===n.status&&a({type:"FAILED_AUTH_PASSWORD"}),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}();function C(e){var t=function(){var t=(0,h.Z)((0,p.Z)().mark((function t(){return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dispatchState({type:"SHOW_LOADER"}),t.t0=e.state.authType,t.next="Login"===t.t0?4:"Sign-Up"===t.t0?9:"Reset Password"===t.t0?12:15;break;case 4:return t.next=6,E(e.state.inputs,e.dispatchState,e.addToast,e.dispatch,Z.Y,s,n);case 6:if(!t.sent){t.next=8;break}e.navigate("/blogs");case 8:return t.abrupt("break",16);case 9:return t.next=11,U(e.state.inputs,e.dispatchState,e.addToast);case 11:return t.abrupt("break",16);case 12:return t.next=14,O(e.state.inputs,e.dispatchState,e.addToast);case 14:return t.abrupt("break",16);case 15:return t.abrupt("return");case 16:e.dispatchState({type:"HIDE_LOADER"});case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=(0,g.If)(),s=a.colorMode,n=a.toggleColorMode;return(0,y.jsx)(x.W2,{maxWidth:"container.xlg",display:"flex",minH:"80vh",children:(0,y.jsxs)(x.xu,{border:["none","2px"],mx:"auto",my:"10",borderColor:["none","gray.300"],p:[5,10],w:["100%","md"],alignSelf:["center","center"],borderRadius:["none","8px"],children:[(0,y.jsx)(x.xu,{textAlign:"right",children:(0,y.jsx)(f.hU,{icon:"light"===s?(0,y.jsx)(S.kL,{}):(0,y.jsx)(S.NW,{color:"yellow.300"}),onClick:n,variant:"ghost","aria-label":"switch_theme"})}),(0,y.jsxs)(x.gC,{spacing:4,width:"full",children:[!e.state.showOTP&&(0,y.jsx)(A,{sendRequest:t,state:e.state,dispatchState:e.dispatchState}),e.state.showOTP&&(0,y.jsx)(I,{resendOTP:t,state:e.state,dispatchState:e.dispatchState})]})]})})}function D(){var e=(0,n.useReducer)(o,l),t=(0,s.Z)(e,2),a=t[0],r=t[1],i=(0,u.I0)(),p=(0,c.s0)(),h=(0,d.$)().addToast;return(0,y.jsx)(C,{addToast:h,navigate:p,dispatch:i,dispatchState:r,state:a})}},4961:function(e,t,a){a.d(t,{Z:function(){return i}});var s=a(1413),n=a(7313),r=a(6417);function i(e){return(0,r.jsx)("form",{onSubmit:e.handleSubmit,style:{width:"100%"},children:n.Children.map(e.children,(function(e){return(0,n.isValidElement)(e)?(0,n.cloneElement)(e,(0,s.Z)({},e.props)):null}))})}},6995:function(e,t,a){a.d(t,{Z:function(){return i}});var s=a(720),n=a(3068),r=a(6417);function i(e){return(0,r.jsxs)(s.NI,{mb:4,isInvalid:e.isInvalid,children:[(0,r.jsx)(s.lX,{fontWeight:"bold",children:e.label}),(0,r.jsx)(n.II,{isRequired:e.isRequired,disabled:e.disabled,type:e.type,name:e.name,onChange:e.onChange,placeholder:e.placeholder,value:e.defaultValue,size:e.size,variant:e.variant})]})}i.defaultProps={name:"name",label:"simple input",type:"text",size:"sm",variant:"filled",disabled:!1,isRequired:!1}}}]);